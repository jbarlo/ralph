# Ralph Progress Log

Append-only log of completed work. Each iteration adds to this file.

---

## Ticket #1: Create hooks.d directory structure
- Updated bin/ralph-init to create hooks.d/ directory with subdirectories: on-start/, on-complete/, on-error/
- Each subdirectory contains a .gitkeep file for git tracking
- Idempotent: skips creation if hooks.d/ already exists
- Files changed: bin/ralph-init
- Tests: verified directory structure created correctly, verified idempotence

## Ticket #2: Create ralph-hooks executor script
- Created bin/ralph-hooks script to execute lifecycle hooks
- Finds all executable files in hooks.d/<event>/ directory
- Executes hooks in lexicographic order (01-first, 02-second, etc.)
- Passes JSON context via stdin, RALPH_HOOK_EVENT, and RALPH_HOOK_CONTEXT env vars
- Continues on failure, collects errors, reports at end
- Exits 0 if no hooks or all succeed, exits 1 if any fail
- Files changed: bin/ralph-hooks (new)
- Tests: verified with test hooks for success, failure, and continuation behavior

## Ticket #3: Implement on-start hook in ralph/ralph-once
- Added on-start hook call to bin/ralph before docker container starts
- Added on-start hook call to bin/ralph-once before docker container starts
- Hook runs on host (not in container) so hooks can access host tools
- JSON payload: {event: "start", ticket: <current-ticket>, timestamp: <iso8601>}
- Gets highest priority pending/in_progress ticket from tickets.json
- Hook failures don't abort ralph (continues with || true)
- Files changed: bin/ralph, bin/ralph-once
- Tests: verified JSON payload generation, tested with temporary hook script

